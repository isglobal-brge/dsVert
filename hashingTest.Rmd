---
title: "hashingTest"
output: html_document
date: "2024-03-01"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Rewriting this file to use digest library to perform hashing and then match rows of data across different datasets.

```{r}
library(digest)
#it has already been added as an import to the DESCRIPTION file
```

First, we do some basic digest examples.

```{r}
digest("Miron", "sha256", serialize = FALSE)
```

```{r}
beforeHash <- c("Miron", "Leon", "Felipe")
afterHash <- c()
for(i in seq(along = beforeHash)){
  afterHash[i] <- digest(beforeHash[i], "sha256", serialize = FALSE)
}
afterHash
```

  Using standard mtcars and iris datasets for simple testing. mtcars has built in rown names so this is a great way to test the data allignment

```{r}
# Load the datasets
data(mtcars)
data(iris)

# Ensure iris dataset is numeric only
iris <- iris[, sapply(iris, is.numeric)]

# Split the datasets into two partitions
partition1_mtcars <- mtcars[, 1:6]
partition2_mtcars <- mtcars[, 7:ncol(mtcars)]

partition1_iris <- iris[, 1:2]
partition2_iris <- iris[, 3:4]
```

First I will scramble the partition2_mtcars randomly. And then I will use hashing to match them up.

```{r}
data1 <- partition1_mtcars
#data2 <- partition2_mtcars
scramble_names <- rownames(partition2_mtcars[sample(1:nrow(partition2_mtcars)),])
data2 <- partition2_mtcars[match(scramble_names, rownames(partition2_mtcars)),]
rownames(data1)
rownames(data2)
```


```{r}
beforeHash <- rownames(data1)
orderHash1 <- c()
for(i in seq(along = beforeHash)){
  orderHash1[i] <- digest(beforeHash[i], "sha256", serialize = FALSE)
}
#orderHash1

beforeHash <- rownames(data2)
orderHash2 <- c()
for(i in seq(along = beforeHash)){
  orderHash2[i] <- digest(beforeHash[i], "sha256", serialize = FALSE)
}
#orderHash
rownames(data1)
rownames(data2[match(orderHash1, orderHash2),])
```





