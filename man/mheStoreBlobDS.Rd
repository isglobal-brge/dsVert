% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mheFullProtocol.R
\name{mheStoreBlobDS}
\alias{mheStoreBlobDS}
\title{Store a blob in server-side storage (with chunking support)}
\usage{
mheStoreBlobDS(key, chunk, chunk_index = 1L, n_chunks = 1L, session_id = NULL)
}
\arguments{
\item{key}{Character. Storage key (e.g., "mwv", "eta_server1")}

\item{chunk}{Character. The blob data (or a chunk of it)}

\item{chunk_index}{Integer. Current chunk index (1-based). Default 1.}

\item{n_chunks}{Integer. Total number of chunks. Default 1 (no chunking).}

\item{session_id}{Character or NULL. Session identifier for concurrent
job isolation. When NULL, falls back to legacy global storage.}
}
\value{
TRUE on success
}
\description{
Generic function for storing large data on the server via chunked
transfer. DataSHIELD's R expression parser imposes a limit on the
size of arguments passed inline in \code{call()} expressions.
Cryptographic objects (CKKS ciphertexts, EC points, key shares,
transport-encrypted blobs) routinely exceed this limit. This
function provides a store-and-assemble pattern: the client splits
large data into chunks (adaptive size, starting at 500 KB), sends each chunk via a
separate \code{datashield.aggregate} call, and the server
auto-assembles them when the last chunk arrives. Downstream
functions read the assembled blob via \code{from_storage = TRUE}.
}
\details{
All data transferred through this mechanism is base64url-encoded
(standard base64 uses \code{+} and \code{/}, which the DSOpal
expression serializer can misinterpret).

This pattern is used throughout the dsVert protocol stack:
\itemize{
\item PSI: EC point vectors (\code{psiProcessTargetDS},
\code{psiDoubleMaskDS}, \code{psiMatchAndAlignDS},
\code{psiFilterCommonDS})
\item MHE key setup: CRP, GKG seed, public key shares, Galois
keys (\code{mheInitDS}, \code{mheCombineDS},
\code{mheStoreCPKDS})
\item Threshold decryption: ciphertext chunks, wrapped shares
\item GLM Secure Routing: transport-encrypted vectors (eta,
mu/w/v)
\item Protocol Firewall: CT hash batches
(\code{mheAuthorizeCTDS})
}
}
